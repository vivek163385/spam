<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Our Love Journey ‚ù§Ô∏è</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<style>
*{box-sizing:border-box}
html,body{margin:0;height:100%;overflow:hidden;font-family:Segoe UI,Inter}

/* üåÑ BACKGROUND COLLAGE */
#bg{position:fixed;inset:0;z-index:-2}
.bgTile{
position:absolute;width:240px;height:240px;
background-size:cover;background-position:center;
border-radius:22px;
filter:blur(12px) brightness(.55)
}

/* SPA */
#app{display:flex;width:1400vw;height:100vh;transition:.8s ease}
.screen{width:100vw;display:flex;align-items:center;justify-content:center;padding:30px}

.card{
background:rgba(255,255,255,.75);
backdrop-filter:blur(28px);
border-radius:40px;
padding:42px;
width:460px;
text-align:center;
box-shadow:0 40px 90px rgba(0,0,0,.35);
}

/* Inputs */
input{
width:100%;
padding:14px 18px;
border-radius:16px;
border:2px solid #ffd1dc;
font-size:1em;
outline:none;
}
button{
width:100%;
margin-top:14px;
padding:14px;
border:none;
border-radius:30px;
background:linear-gradient(135deg,#ff758c,#ff7eb3);
color:white;
cursor:pointer;
}

/* MAP */
#map{width:100%;height:100%}

/* TIC TAC TOE */
.board{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-top:20px}
.cell{
background:white;border-radius:18px;height:90px;
display:flex;align-items:center;justify-content:center;
font-size:2.5em;color:#ff4e8b;cursor:pointer;
}

/* MEMORY GAME */
.mosaic{display:grid;grid-template-columns:repeat(4,1fr);gap:14px;margin-top:20px}
.tile{
aspect-ratio:1/1;border-radius:18px;
background:linear-gradient(135deg,#ff9bb8,#ff6fa5);
cursor:pointer;overflow:hidden;
}
.tile img{width:100%;height:100%;object-fit:cover;display:none}
.tile.revealed img{display:block}

/* üíå ENVELOPE */
.envelope{
width:260px;height:170px;
background:white;border-radius:18px;
margin:auto;box-shadow:0 20px 50px rgba(0,0,0,.25);
position:relative;cursor:pointer;overflow:hidden;
}
.envelope .flap{
height:55%;
background:linear-gradient(#ffd1dc,#ffb3c6);
border-radius:0 0 120px 120px;
transition:.8s;
transform-origin:top;
}
.envelope.open .flap{transform:rotateX(180deg)}

.letter{
position:absolute;
bottom:-120%;
left:10%;
width:80%;
background:white;
border-radius:16px;
padding:20px;
color:#ff4e8b;
font-family:cursive;
transition:.9s;
}
.envelope.open .letter{bottom:15%}

/* üíò Valentine */
#valBox{position:relative;height:200px;margin-top:20px}
#yesBtn{position:absolute;bottom:0;left:0;right:0;margin:auto}
#noBtn{position:absolute;top:0;left:0}

/* ‚ù§Ô∏è FINAL LOVE */
#finalLove{
display:none;
font-size:3.2em;
font-weight:700;
color:#ff4e8b;
text-align:center;
animation:pop 1.2s ease infinite alternate;
text-shadow:0 0 25px #ff7eb3;
}

@keyframes pop{
from{transform:scale(1)}
to{transform:scale(1.08)}
}

/* üéÜ FIREWORKS */
canvas{position:fixed;top:0;left:0;pointer-events:none}

/* üì∏ MAP PHOTO MODAL */
#photoModal{
display:none;
position:fixed;
inset:0;
background:rgba(0,0,0,.75);
align-items:center;
justify-content:center;
z-index:20;
}
#photoModal img{
max-width:80%;
max-height:80%;
border-radius:20px;
box-shadow:0 0 40px rgba(255,120,170,.8)
}
</style>
</head>

<body>

<div id="bg"></div>
<canvas id="fx"></canvas>

<div id="photoModal" onclick="closePhoto()">
<img id="modalImg">
</div>

<div id="app">

<!-- QUESTIONS -->
<div class="screen"><div class="card">
<h1>Unlock Our Journey üîê</h1>
<input id="q1" placeholder="Enter my phone number">
<button onclick="check1()">Submit</button>
</div></div>

<div class="screen"><div class="card">
<h1>Favorite pizza place üçï</h1>
<input id="q2">
<button onclick="check2()">Submit</button>
</div></div>

<div class="screen"><div class="card">
<h1>My school name üè´</h1>
<input id="q3">
<button onclick="check3()">Submit</button>
</div></div>

<!-- MAP -->
<div class="screen"><div id="map"></div></div>

<!-- TIC TAC TOE -->
<div class="screen"><div class="card">
<h1>Game ‚ùå‚≠ï</h1>
<div class="board" id="board"></div>
</div></div>

<!-- MEMORY -->
<div class="screen"><div class="card">
<h1>Match the photos üß©</h1>
<div class="mosaic" id="mosaic"></div>
</div></div>

<!-- ENVELOPE + VALENTINE + FINAL -->
<div class="screen"><div class="card">

<h1 id="letterTitle">Your Love Letter üíå</h1>

<div class="envelope" id="env" onclick="openEnvelope()">
<div class="flap"></div>
<div class="letter">I love you endlessly ‚ù§Ô∏è</div>
</div>

<div id="valSection" style="display:none">
<h1>Will you be my Valentine? üíò</h1>
<div id="valBox">
<button id="yesBtn" onclick="yes()">Yes üòç</button>
<button id="noBtn">No üò¢</button>
</div>
</div>

<div id="finalLove">One of the best decisions!! <br> I love you kanda! ‚ù§Ô∏è</div>

</div></div>

</div>

<script>
/* üåÑ BACKGROUND COLLAGE */
const bgImgs=["bg1.jpg","bg2.jpg","bg3.jpg","bg4.jpg","bg5.jpg"];
for(let i=0;i<80;i++){
let t=document.createElement("div");
t.className="bgTile";
t.style.backgroundImage=`url(${bgImgs[Math.floor(Math.random()*5)]})`;
t.style.left=Math.random()*100+"%";
t.style.top=Math.random()*100+"%";
bg.appendChild(t);
}

/* SPA FLOW */
let step=0;
const next=()=>app.style.transform=`translateX(-${++step*100}vw)`;

/* QUESTIONS */
check1=()=>["7259196694","6361434372"].includes(q1.value)&&next();
check2=()=>q2.value.toLowerCase()=="pizza bakery"&&next();
check3=()=>q3.value.toLowerCase()=="kendriya vidyalaya"&&next();

/* üó∫ MAP + PHOTO POPUP */
const map=L.map('map',{zoomControl:false});
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

const places=[
[12.97,77.59,"map_bengaluru.jpg"],
[15.85,74.49,"map_belagavi.jpg"],
[48.85,2.35,"map_paris.jpg"],
[46.81,8.22,"map_switzerland.jpg"],
[7.87,80.77,"map_srilanka.jpg"]
];

places.forEach(p=>{
const m=L.marker([p[0],p[1]]).addTo(map);
m.on("click",e=>{
e.originalEvent.stopPropagation();
openPhoto(p[2]);
});
});

map.fitBounds(places.map(p=>[p[0],p[1]]));
map.on("click",()=>next());

function openPhoto(src){
modalImg.src=src;
photoModal.style.display="flex";
}
function closePhoto(){
photoModal.style.display="none";
}

/* ‚ùå‚≠ï TIC TAC TOE */
let cells=Array(9).fill("");
function draw(){
board.innerHTML="";
cells.forEach((v,i)=>{
let c=document.createElement("div");
c.className="cell";c.textContent=v;
c.onclick=()=>play(i);
board.appendChild(c);
});
}
draw();

function play(i){
if(cells[i])return;
cells[i]="X";
if(win("X")){setTimeout(next,600);return;}
let empty=cells.map((v,i)=>v?null:i).filter(v=>v!==null);
if(!empty.length){cells=Array(9).fill("");draw();return;}
cells[empty[Math.floor(Math.random()*empty.length)]]="O";
if(win("O"))cells=Array(9).fill("");
draw();
}

const wins=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
const win=p=>wins.some(w=>cells[w[0]]===p&&cells[w[1]]===p&&cells[w[2]]===p);

/* üß© MEMORY GAME */
const photos=["photo1.jpg","photo2.jpg","photo3.jpg","photo4.jpg","photo5.jpg","photo6.jpg","photo7.jpg","photo8.jpg"];
let cards=[...photos,...photos].sort(()=>Math.random()-0.5);
let first=null,lock=false,matched=0;

cards.forEach(src=>{
let t=document.createElement("div");
t.className="tile";
let i=document.createElement("img");i.src=src;t.appendChild(i);
t.onclick=()=>{
if(lock||t.classList.contains("revealed"))return;
t.classList.add("revealed");
if(!first){first=t;return;}
lock=true;
setTimeout(()=>{
if(first.querySelector("img").src===i.src){
matched+=2;if(matched===cards.length)next();
}else{
first.classList.remove("revealed");t.classList.remove("revealed");
}
first=null;lock=false;
},600);
};
mosaic.appendChild(t);
});

/* üíå Envelope */
function openEnvelope(){
env.classList.add("open");
setTimeout(()=>valSection.style.display="block",1200);
}

/* üèÉ NO button runs away */
const sad=["üò¢","üò≠","ü•∫","üíî","üòû","üòî"];
noBtn.onmouseover=()=>{
let b=valBox.getBoundingClientRect();
noBtn.style.left=Math.random()*(b.width-noBtn.offsetWidth)+"px";
noBtn.style.top=Math.random()*(b.height-noBtn.offsetHeight-40)+"px";
noBtn.textContent="No "+sad[Math.floor(Math.random()*sad.length)];
};

/* ‚ù§Ô∏è YES + FIREWORKS */
function yes(){
valSection.style.display="none";
env.style.display="none";
letterTitle.style.display="none";
finalLove.style.display="block";
fireworks();
}


/* üéÜ FIREWORKS */
const canvas=document.getElementById("fx");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;canvas.height=innerHeight;
let parts=[];

function burst(){
for(let i=0;i<160;i++){
parts.push({
x:canvas.width/2,y:canvas.height/2,
dx:(Math.random()-.5)*7,dy:(Math.random()-.5)*7,
life:90,c:`hsl(${Math.random()*360},100%,70%)`
});
}
}
function fireworks(){setInterval(burst,650);animate();}
function animate(){
ctx.clearRect(0,0,canvas.width,canvas.height);
parts.forEach(p=>{
ctx.fillStyle=p.c;
ctx.fillRect(p.x,p.y,4,4);
p.x+=p.dx;p.y+=p.dy;p.life--;
});
parts=parts.filter(p=>p.life>0);
requestAnimationFrame(animate);
}
</script>

</body>
</html>
